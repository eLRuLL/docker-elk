import re
from datetime import datetime

files = [
    'ws.2018-08-02.log',
    'ws.2018-08-03.log',
    'ws.2018-08-04.log',
    'ws.2018-08-05.log',
    'ws.2018-08-06.log',
    'ws.2018-08-07.log',
    'ws.2018-08-08.log',
    'ws.2018-08-09.log',
    'ws.2018-08-10.log',
    'ws.2018-08-11.log',
    'ws.2018-08-12.log',
    'ws.2018-08-13.log',
    'ws.2018-08-14.log',
    'ws.2018-08-15.log',
    'ws.2018-08-16.log',
    'ws.2018-08-17.log',
    'ws.2018-08-18.log',
    'ws.2018-08-19.log',
    'ws.2018-08-20.log',
    'ws.2018-08-21.log',
    'ws.2018-08-22.log',
    'ws.2018-08-23.log',
    'ws.2018-08-24.log',
    'ws.2018-08-25.log',
    'ws.2018-08-26.log',
    'ws.2018-08-27.log',
    'ws.2018-08-28.log',
    'ws.2018-08-29.log',
    'ws.2018-08-30.log',
    'ws.2018-08-31.log',
    'ws.2018-09-01.log',
    'ws.2018-09-02.log',
    'ws.2018-09-03.log',
    'ws.2018-09-04.log',
    'ws.2018-09-05.log',
    'ws.2018-09-06.log',
    'ws.2018-09-07.log',
    'ws.2018-09-08.log',
    'ws.2018-09-09.log',
    'ws.2018-09-10.log',
    'ws.2018-09-11.log',
    'ws.2018-09-12.log',
    'ws.2018-09-13.log',
    'ws.2018-09-14.log',
    'ws.2018-09-15.log',
    'ws.2018-09-16.log',
    'ws.2018-09-17.log',
    'ws.2018-09-18.log',
    'ws.2018-09-19.log',
    'ws.2018-09-20.log',
    'ws.2018-09-21.log',
    'ws.2018-09-22.log',
    'ws.2018-09-23.log',
    'ws.2018-09-24.log',
    'ws.2018-09-25.log',
    'ws.2018-09-26.log',
    'ws.2018-09-27.log',
    'ws.2018-09-28.log',
    'ws.2018-09-29.log',
    'ws.2018-09-30.log',
    'ws.2018-10-01.log',
    'ws.2018-10-02.log',
    'ws.2018-10-03.log',
    'ws.2018-10-04.log',
    'ws.2018-10-05.log',
    'ws.2018-10-06.log',
    'ws.2018-10-07.log',
    'ws.2018-10-08.log',
    'ws.2018-10-09.log',
    'ws.2018-10-10.log',
    'ws.2018-10-11.log',
    'ws.2018-10-12.log',
    'ws.2018-10-13.log',
    'ws.2018-10-14.log',
    'ws.2018-10-15.log',
    'ws.2018-10-16.log',
    'ws.2018-10-17.log',
    'ws.2018-10-18.log',
    'ws.2018-10-19.log',
    'ws.2018-10-20.log',
    'ws.2018-10-21.log',
    'ws.2018-10-22.log',
    'ws.2018-10-23.log',
    'ws.2018-10-24.log',
    'ws.2018-10-25.log',
    'ws.2018-10-26.log',
    'ws.2018-10-27.log',
    'ws.2018-10-28.log',
    'ws.2018-10-29.log',
    'ws.2018-10-30.log',
    'ws.2018-10-31.log',
    'ws.2018-11-01.log',
    'ws.2018-11-02.log',
    'ws.2018-11-03.log',
    'ws.2018-11-04.log',
    'ws.2018-11-05.log',
    'ws.2018-11-06.log',
    'ws.2018-11-07.log',
    'ws.2018-11-08.log',
    'ws.2018-11-09.log',
    'ws.2018-11-10.log',
    'ws.2018-11-11.log',
    'ws.2018-11-12.log',
    'ws.2018-11-13.log',
    'ws.2018-11-14.log',
    'ws.2018-11-15.log',
    'ws.2018-11-16.log',
    'ws.2018-11-17.log',
    'ws.2018-11-18.log',
    'ws.2018-11-19.log',
    'ws.2018-11-20.log',
    'ws.2018-11-21.log',
    'ws.2018-11-22.log',
    'ws.2018-11-23.log',
    'ws.2018-11-24.log',
    'ws.2018-11-25.log',
    'ws.2018-11-26.log',
    'ws.2018-11-27.log',
    'ws.2018-11-28.log',
    'ws.log',
]

for input_file_name in files:
    output_file_name = '_' + input_file_name
    with open(input_file_name, 'r') as f1, open(output_file_name, 'w') as f2:
        for line in f1:
            matched = re.search('^\[(.+?)\]', line)
            if matched:
                found_date = matched.group(1)
                new_date = datetime.strptime(found_date, '%a %b %d %H:%M:%S %Y').strftime('%Y-%m-%d %H:%M:%S')
                f2.write(line.replace(found_date, new_date))
